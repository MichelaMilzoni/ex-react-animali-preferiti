<!-- index.html -->
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>I miei animali Preferiti</title>

  <!-- Collego il file CSS per lo stile -->
  <link rel="stylesheet" href="index.css" />

  <!-- Importo React e Babel per usare JSX direttamente nel browser -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body>
  <header>
    <h1>I miei animali Preferiti</h1>
  </header>

  <main>
    <figure>
      <img src="https://picsum.photos/400/300" alt="Immagine Casuale" />
    </figure>

    <!-- Milestone 1: lista statica -->
    <section>
      <h2>Lista statica</h2>
      <div class="lista-animali-statica"></div>
    </section>

    <!-- Milestone 2: lista dinamica con modale semplice -->
    <section>
      <h2>Lista dinamica manuale</h2>
      <div class="lista-animali-dinamica"></div>
    </section>

    <!-- Milestone 3: lista con modale interattiva -->
    <section>
      <h2>Lista con modale interattiva</h2>
      <div class="lista-animali-modale"></div>
    </section>

    <!-- Bonus: lista con chiamata API -->
    <section>
      <h2>Lista da API</h2>
      <div class="lista-animali-api"></div>
    </section>
  </main>

  <footer>
    <p>Creato con amore da... un collega sbadato! üêæ</p>
  </footer>

  <!-- Script JSX con Babel: Milestone 1 -->
  <script type="text/babel">
    const animali = ["Gatto", "Cane", "Pappagallo", "Coniglio", "Cavallo"];

    function ListaAnimaliStatica() {
      return (
        <details open>
          <summary>Animali</summary>
          <ul>
            {animali.map((animale, i) => (
              <li key={i}>{animale}</li>
            ))}
          </ul>
        </details>
      );
    }

    const root1 = ReactDOM.createRoot(document.querySelector(".lista-animali-statica"));
    root1.render(<ListaAnimaliStatica />);
  </script>

  <!-- Script JSX con Babel: Milestone 2 -->
  <script type="text/babel">
    const { useState } = React;

function ListaAnimaliDinamica() {
  const [animali, setAnimali] = useState([]);
  const animalsChoices = ["Cane", "Gatto", "Pappagallo", "Cavallo", "Panda"];

  function aggiungiAnimaleCasuale() {
    const animaleCasuale = animalsChoices[Math.floor(Math.random() * animalsChoices.length)];
    if (!animali.includes(animaleCasuale)) {
      setAnimali([...animali, animaleCasuale]);
    }
  }

  return (
    <>
      <button onClick={aggiungiAnimaleCasuale}>Aggiungi Animale</button>

      <details open>
        <summary>Animali</summary>
        <ul>
          {animali.map((animale, i) => (
            <li key={i}>{animale}</li>
          ))}
        </ul>
      </details>
    </>
  );
}

    const root2 = ReactDOM.createRoot(document.querySelector(".lista-animali-dinamica"));
    root2.render(<ListaAnimaliDinamica />);
  </script>

  <!-- Script JSX con Babel: Milestone 3 -->
  <script type="text/babel">
    function ListaAnimaliConModale() {
      const [animali, setAnimali] = useState([]);
      const [showModal, setShowModal] = useState(false);
      const [inputValue, setInputValue] = useState("");

      function confermaAnimale() {
        if (inputValue.trim()) {
          setAnimali([...animali, inputValue.trim()]);
          setInputValue("");
          setShowModal(false);
        }
      }

      function annulla() {
        setInputValue("");
        setShowModal(false);
      }

      const inputContent = (
        <input
          type="text"
          value={inputValue}
          onChange={(e) => setInputValue(e.target.value)}
          placeholder="Inserisci un animale"
        />
      );

      return (
        <>
          <button onClick={() => setShowModal(true)}>Aggiungi animale</button>

          <Modal
            title="Nuovo animale"
            content={inputContent}
            show={showModal}
            onClose={annulla}
            onConfirm={confermaAnimale}
          />

          <details open>
            <summary>Animali</summary>
            <ul>
              {animali.map((animale, i) => (
                <li key={i}>{animale}</li>
              ))}
            </ul>
          </details>
        </>
      );
    }

    const root3 = ReactDOM.createRoot(document.querySelector(".lista-animali-modale"));
    root3.render(<ListaAnimaliConModale />);
  </script>

  <!-- Script JSX esterno: Milestone Bonus -->
  <script type="text/babel" src="bonus.js"></script>
</body>
</html>
